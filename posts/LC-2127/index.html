<!DOCTYPE html><html lang="zh-TW" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>LeetCode 🔴 2127. Maximum Employees to Be Invited to a Meeting | 十六個天亮</title><meta name="author" content="SayA"><meta name="copyright" content="SayA"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Problem solving record for LeetCode 2127. Maximum Employees to Be Invited to a Meeting.">
<meta property="og:type" content="article">
<meta property="og:title" content="LeetCode 🔴 2127. Maximum Employees to Be Invited to a Meeting">
<meta property="og:url" content="https://gdst.dev/posts/LC-2127/">
<meta property="og:site_name" content="十六個天亮">
<meta property="og:description" content="Problem solving record for LeetCode 2127. Maximum Employees to Be Invited to a Meeting.">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://i.gdst.dev/works/797460764408629429.webp">
<meta property="article:published_time" content="2025-01-27T02:10:39.000Z">
<meta property="article:modified_time" content="2025-07-17T23:02:34.964Z">
<meta property="article:author" content="SayA">
<meta property="article:tag" content="DFS">
<meta property="article:tag" content="LeetCode">
<meta property="article:tag" content="圖論(Graph)">
<meta property="article:tag" content="拓樸排序(Topological Sort)">
<meta property="article:tag" content="基環樹(Pseudotree)">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.gdst.dev/works/797460764408629429.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "LeetCode 🔴 2127. Maximum Employees to Be Invited to a Meeting",
  "url": "https://gdst.dev/posts/LC-2127/",
  "image": "https://i.gdst.dev/works/797460764408629429.webp",
  "datePublished": "2025-01-27T02:10:39.000Z",
  "dateModified": "2025-07-17T23:02:34.964Z",
  "author": [
    {
      "@type": "Person",
      "name": "SayA",
      "url": "https://gdst.dev/"
    }
  ]
}</script><link rel="shortcut icon" href="/imgs/icon_SA_192x912.png"><link rel="canonical" href="https://gdst.dev/posts/LC-2127/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//static.cloudflareinsights.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 12 || hour >= 12
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-4VKFM9RYWW"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-4VKFM9RYWW')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-4VKFM9RYWW', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;82a28d784b954ba1bd0a419052553971&quot;}"></script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到符合您查詢的內容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '複製成功',
    error: '複製失敗',
    noSupport: '瀏覽器不支援'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '剛剛',
    min: '分鐘前',
    hour: '小時前',
    day: '天前',
    month: '個月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: SayA","link":"連結: ","source":"來源: 十六個天亮","info":"著作權歸作者所有。如需商業轉載，請聯絡作者獲得授權，非商業轉載請註明出處。"}},
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '載入更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'LeetCode 🔴 2127. Maximum Employees to Be Invited to a Meeting',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/simple-icons.css"><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="十六個天亮" type="application/atom+xml">
<link rel="alternate" href="/rss2.xml" title="十六個天亮" type="application/rss+xml">
</head><body><div id="web_bg" style="background-image: url(url(https://i.gdst.dev/booth/aiartstock/Nature2/02_2304x1152/nature2_357-2.webp));"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/imgs/profile/profile3.png" onerror="this.onerror=null;this.src='/imgs/404_friend.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">262</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">147</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">48</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-fw fa fa-leaf"></i><span> 說說</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fa-fw fas fa-images"></i><span> 圖庫</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 關於</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://i.gdst.dev/works/797460764408629429.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">十六個天亮</span></a><a class="nav-page-title" href="/"><span class="site-name">LeetCode 🔴 2127. Maximum Employees to Be Invited to a Meeting</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜尋</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-fw fa fa-leaf"></i><span> 說說</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fa-fw fas fa-images"></i><span> 圖庫</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 關於</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">LeetCode 🔴 2127. Maximum Employees to Be Invited to a Meeting</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2025-01-27T02:10:39.000Z" title="發表於 2025-01-27 10:10:39">2025-01-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2025-07-17T23:02:34.964Z" title="更新於 2025-07-18 07:02:34">2025-07-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/LeetCode/">LeetCode</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/LeetCode/Hard/">Hard</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">總字數:</span><span class="word-count">2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">閱讀時間:</span><span>8分鐘</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">瀏覽量:</span><span class="waline-pageview-count" data-path="/posts/LC-2127/"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="🔗-🔴-2127-Maximum-Employees-to-Be-Invited-to-a-Meeting-swig￼2">🔗 🔴 <a target="_blank" rel="noopener" href="https://leetcode.com/problems/maximum-employees-to-be-invited-to-a-meeting/">2127. Maximum Employees to Be Invited to a Meeting</a> <mark class="hl-label red">2449</mark></h1>
<h5 id="source-Weekly-Contest-274">source: <a target="_blank" rel="noopener" href="https://leetcode.com/contest/weekly-contest-274/"><code>Weekly Contest 274</code></a></h5>
<h2 id="題意">題意</h2>
<p>有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 名員工要參加會議，會議桌是 <em>圓形</em> 的，且可以坐下任意數目的人。</p>
<p>每個員工都有 <strong>一位</strong> 喜歡的員工，且喜歡的員工不會是自己，只有旁邊坐在喜歡員工的旁邊時，該員工才會參加會議。</p>
<p>給定一個整數陣列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">favorite</mtext></mrow><annotation encoding="application/x-tex">\textit{favorite}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord textit">favorite</span></span></span></span></span> ，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">favorite</mtext><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\textit{favorite}[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord textit">favorite</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> 表示第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 位員工喜歡的員工，請問最多有幾位員工可以參加會議？</p>
<h4 id="約束條件">約束條件</h4>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">2 \leq n \leq 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>f</mi><mi>a</mi><mi>v</mi><mi>o</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>≤</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \leq favorite[i] \leq n - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>a</mi><mi>v</mi><mi>o</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo mathvariant="normal">≠</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">favorite[i] \neq i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></li>
</ul>
<h2 id="思路：基環樹-pseudotree-與基環樹森林-pseudoforest">思路：基環樹(pseudotree)與基環樹森林(pseudoforest)</h2>
<p>首先可以將每個員工視為圖上的一個點，並且向其喜歡的員工連有向邊，即從 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 向 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>a</mi><mi>v</mi><mi>o</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">favorite[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> 連一條有向邊，則可以得到一張有向圖。注意到題目中每個員工都有且僅有一位喜歡的員工，且喜歡的員工不會是自己，因此可以得知每個點的 out-degree 均為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>。</p>
<p>根據這個性質，可以得出圖的形狀：圖中存在若干個連通分量(connected component)，且每個連通分量都由一個環以及指向環的樹枝組成，證明如下：</p>
<ul>
<li>設此連通分量的大小為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>，即存在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 個點，由於每個點的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">out-degree</mtext></mrow><annotation encoding="application/x-tex">\textit{out-degree}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord textit">out-degree</span></span></span></span></span> 均為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，因此這個分量有且僅有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 條邊。</li>
<li>若其不包含環，則最多只能有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 條邊，否則與每個點的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">out-degree</mtext></mrow><annotation encoding="application/x-tex">\textit{out-degree}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord textit">out-degree</span></span></span></span></span> 均為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 矛盾，或是添加任何一條邊都會導致環的出現。</li>
<li>又由於每個點的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">out-degree</mtext></mrow><annotation encoding="application/x-tex">\textit{out-degree}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord textit">out-degree</span></span></span></span></span> 均為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，因此若某個連通分量中不包含環，則該連通分量中必定存在一個點的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">out-degree</mtext></mrow><annotation encoding="application/x-tex">\textit{out-degree}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord textit">out-degree</span></span></span></span></span> 為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，這也與每個點的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">out-degree</mtext></mrow><annotation encoding="application/x-tex">\textit{out-degree}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord textit">out-degree</span></span></span></span></span> 均為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 矛盾。</li>
</ul>
<p>對於圖中的每個連通分量，可以將其環上的每個點視作樹的根節點，而這樣的連通分量被稱為 <mark class="hl-label purple">基環樹(pseudotree)</mark>。且圖中會有多個這樣的連通分量，由基環樹組成的森林叫 <mark class="hl-label purple">基環樹森林(pseudoforest)</mark>。</p>
<ul>
<li>
<mark class="hl-label blue">基環</mark> 指的是連通分量中的環，且基環樹中 <mark class="hl-label pink">有且僅有一個環</mark> ，需要注意的是， <mark class="hl-label pink">基環可能只包含兩個節點</mark>。下圖用紅色標記了基環。
</li>
<li>由於圖中任意節點有且只有一條出邊，因此邊的方向會指向環，因此這樣的圖被稱做 <mark class="hl-label green">內向</mark> 基環樹森林。</li>
<li>對應的情況是圖中任意節點有且只有一條入邊，這樣的圖會從環指向外側，因此被稱做 <mark class="hl-label green">外向</mark> 基環樹森林。</li>
</ul>
<div style="margin: 0 0 20px;">
                    <div style="max-width: 400px; margin: 0 auto;">
                    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg 
 viewBox="0.00 0.00 325.00 209.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 205)">
<title>內向基環樹森林</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-205 321,-205 321,4 -4,4"/>
<!-- 1 -->
<g id="node1" class="node">
<title>1</title>
<ellipse fill="#ffccff" stroke="#000000" cx="51.5" cy="-21.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="51.5" y="-17.3" font-family="Times,serif" font-size="14.00" fill="#000000">1</text>
</g>
<!-- 2 -->
<g id="node2" class="node">
<title>2</title>
<ellipse fill="#ffccff" stroke="#000000" cx="112.5" cy="-21.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="112.5" y="-17.3" font-family="Times,serif" font-size="14.00" fill="#000000">2</text>
</g>
<!-- 1&#45;&gt;2 -->
<g id="edge1" class="edge">
<title>1&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M68.6563,-8.4614C74.3615,-5.8222 80.0668,-4.8756 85.772,-5.6216"/>
<polygon fill="#000000" stroke="#000000" points="84.7908,-8.9813 95.3735,-8.4752 86.785,-2.2713 84.7908,-8.9813"/>
</g>
<!-- 2&#45;&gt;1 -->
<g id="edge2" class="edge">
<title>2&#45;&gt;1</title>
<path fill="none" stroke="#000000" d="M95.3735,-34.5248C89.6683,-37.1699 83.963,-38.1224 78.2578,-37.3822"/>
<polygon fill="#000000" stroke="#000000" points="79.2385,-34.0225 68.6563,-34.5386 77.2506,-40.7343 79.2385,-34.0225"/>
</g>
<!-- 3 -->
<g id="node3" class="node">
<title>3</title>
<ellipse fill="#ffffff" stroke="#000000" cx="51.5" cy="-100.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="51.5" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000">3</text>
</g>
<!-- 3&#45;&gt;1 -->
<g id="edge3" class="edge">
<title>3&#45;&gt;1</title>
<path fill="none" stroke="#000000" d="M51.5,-78.9129C51.5,-70.9881 51.5,-61.8428 51.5,-53.2138"/>
<polygon fill="#000000" stroke="#000000" points="55.0001,-53.061 51.5,-43.061 48.0001,-53.061 55.0001,-53.061"/>
</g>
<!-- 4 -->
<g id="node4" class="node">
<title>4</title>
<ellipse fill="#ffffff" stroke="#000000" cx="112.5" cy="-100.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="112.5" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000">4</text>
</g>
<!-- 4&#45;&gt;2 -->
<g id="edge4" class="edge">
<title>4&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M112.5,-78.9129C112.5,-70.9881 112.5,-61.8428 112.5,-53.2138"/>
<polygon fill="#000000" stroke="#000000" points="116.0001,-53.061 112.5,-43.061 109.0001,-53.061 116.0001,-53.061"/>
</g>
<!-- 10 -->
<g id="node5" class="node">
<title>10</title>
<ellipse fill="#ffffff" stroke="#000000" cx="21.5" cy="-179.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="21.5" y="-175.3" font-family="Times,serif" font-size="14.00" fill="#000000">10</text>
</g>
<!-- 10&#45;&gt;3 -->
<g id="edge5" class="edge">
<title>10&#45;&gt;3</title>
<path fill="none" stroke="#000000" d="M29.2257,-159.1555C32.5501,-150.4014 36.5034,-139.9911 40.1502,-130.3878"/>
<polygon fill="#000000" stroke="#000000" points="43.5223,-131.3667 43.8004,-120.7755 36.9782,-128.8816 43.5223,-131.3667"/>
</g>
<!-- 11 -->
<g id="node6" class="node">
<title>11</title>
<ellipse fill="#ffffff" stroke="#000000" cx="82.5" cy="-179.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="82.5" y="-175.3" font-family="Times,serif" font-size="14.00" fill="#000000">11</text>
</g>
<!-- 11&#45;&gt;3 -->
<g id="edge6" class="edge">
<title>11&#45;&gt;3</title>
<path fill="none" stroke="#000000" d="M74.5167,-159.1555C71.0454,-150.3093 66.9104,-139.7717 63.1092,-130.0848"/>
<polygon fill="#000000" stroke="#000000" points="66.3673,-128.8059 59.4562,-120.7755 59.851,-131.363 66.3673,-128.8059"/>
</g>
<!-- 5 -->
<g id="node7" class="node">
<title>5</title>
<ellipse fill="#ffccff" stroke="#000000" cx="173.5" cy="-100.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="173.5" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000">5</text>
</g>
<!-- 6 -->
<g id="node8" class="node">
<title>6</title>
<ellipse fill="#ffccff" stroke="#000000" cx="234.5" cy="-100.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="234.5" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000">6</text>
</g>
<!-- 5&#45;&gt;6 -->
<g id="edge7" class="edge">
<title>5&#45;&gt;6</title>
<path fill="none" stroke="#000000" d="M195.4219,-100.5C197.869,-100.5 200.3162,-100.5 202.7633,-100.5"/>
<polygon fill="#000000" stroke="#000000" points="202.8239,-104.0001 212.8239,-100.5 202.8238,-97.0001 202.8239,-104.0001"/>
</g>
<!-- 7 -->
<g id="node9" class="node">
<title>7</title>
<ellipse fill="#ffccff" stroke="#000000" cx="234.5" cy="-21.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="234.5" y="-17.3" font-family="Times,serif" font-size="14.00" fill="#000000">7</text>
</g>
<!-- 6&#45;&gt;7 -->
<g id="edge8" class="edge">
<title>6&#45;&gt;7</title>
<path fill="none" stroke="#000000" d="M234.5,-78.9129C234.5,-70.9881 234.5,-61.8428 234.5,-53.2138"/>
<polygon fill="#000000" stroke="#000000" points="238.0001,-53.061 234.5,-43.061 231.0001,-53.061 238.0001,-53.061"/>
</g>
<!-- 7&#45;&gt;5 -->
<g id="edge9" class="edge">
<title>7&#45;&gt;5</title>
<path fill="none" stroke="#000000" d="M221.2897,-38.6084C212.9817,-49.3679 202.118,-63.4374 192.8481,-75.4427"/>
<polygon fill="#000000" stroke="#000000" points="190.0775,-73.304 186.7361,-83.3582 195.618,-77.5822 190.0775,-73.304"/>
</g>
<!-- 8 -->
<g id="node10" class="node">
<title>8</title>
<ellipse fill="#ffffff" stroke="#000000" cx="234.5" cy="-179.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="234.5" y="-175.3" font-family="Times,serif" font-size="14.00" fill="#000000">8</text>
</g>
<!-- 8&#45;&gt;6 -->
<g id="edge10" class="edge">
<title>8&#45;&gt;6</title>
<path fill="none" stroke="#000000" d="M234.5,-157.9129C234.5,-149.9881 234.5,-140.8428 234.5,-132.2138"/>
<polygon fill="#000000" stroke="#000000" points="238.0001,-132.061 234.5,-122.061 231.0001,-132.061 238.0001,-132.061"/>
</g>
<!-- 9 -->
<g id="node11" class="node">
<title>9</title>
<ellipse fill="#ffffff" stroke="#000000" cx="295.5" cy="-100.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="295.5" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000">9</text>
</g>
<!-- 9&#45;&gt;7 -->
<g id="edge11" class="edge">
<title>9&#45;&gt;7</title>
<path fill="none" stroke="#000000" d="M282.2639,-83.3582C274.0306,-72.6953 263.2946,-58.7913 254.087,-46.8668"/>
<polygon fill="#000000" stroke="#000000" points="256.5922,-44.3844 247.7103,-38.6084 251.0516,-48.6625 256.5922,-44.3844"/>
</g>
</g>
</svg>

                    <div style="text-align: center;margin: -8px 0 10px;color: #858585;">內向基環樹森林</div>
                    </div>
                    
                </div>
<p>在得到圖的形狀後，接下來考慮在這些連通分量中，分別可以選擇多少個員工參加會議：</p>
<ul>
<li>對於基環長度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&gt;</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">&gt;2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 的情況，只能選擇基環上的所有員工，且只能以環的形狀選擇。故對於此種情況，最大員工數目即為最大的基環長度，記作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">maxRing</mtext></mrow><annotation encoding="application/x-tex">\textit{maxRing}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord textit">maxRing</span></span></span></span></span>。</li>
<li>對於基環長度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 的情況，其基環可以與兩側最長鏈相連，形成一個更長的鏈。且對於這種情況，可以將這些鏈繼續連接，故可以累加所有基環長度為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 的基環樹的鏈長，記作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">sumChain</mtext></mrow><annotation encoding="application/x-tex">\textit{sumChain}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord textit">sumChain</span></span></span></span></span>。</li>
</ul>
<div style="margin: 0 0 20px;">
                    <div style="max-width: 300px; margin: 0 auto;">
                    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg 
 viewBox="0.00 0.00 234.00 130.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 126)">
<title>長度為 2 的情況</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-126 230,-126 230,4 -4,4"/>
<!-- 1 -->
<g id="node1" class="node">
<title>1</title>
<ellipse fill="#ffccff" stroke="#000000" cx="143.5" cy="-21.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="143.5" y="-17.3" font-family="Times,serif" font-size="14.00" fill="#000000">1</text>
</g>
<!-- 2 -->
<g id="node2" class="node">
<title>2</title>
<ellipse fill="#ffccff" stroke="#000000" cx="204.5" cy="-21.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="204.5" y="-17.3" font-family="Times,serif" font-size="14.00" fill="#000000">2</text>
</g>
<!-- 1&#45;&gt;2 -->
<g id="edge2" class="edge">
<title>1&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M160.6563,-8.4614C166.3615,-5.8222 172.0668,-4.8756 177.772,-5.6216"/>
<polygon fill="#000000" stroke="#000000" points="176.7908,-8.9813 187.3735,-8.4752 178.785,-2.2713 176.7908,-8.9813"/>
</g>
<!-- 2&#45;&gt;1 -->
<g id="edge3" class="edge">
<title>2&#45;&gt;1</title>
<path fill="none" stroke="#000000" d="M187.3735,-34.5248C181.6683,-37.1699 175.963,-38.1224 170.2578,-37.3822"/>
<polygon fill="#000000" stroke="#000000" points="171.2385,-34.0225 160.6563,-34.5386 169.2506,-40.7343 171.2385,-34.0225"/>
</g>
<!-- 4 -->
<g id="node3" class="node">
<title>4</title>
<ellipse fill="#ffffff" stroke="#000000" cx="204.5" cy="-100.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="204.5" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000">4</text>
</g>
<!-- 4&#45;&gt;2 -->
<g id="edge5" class="edge">
<title>4&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M204.5,-78.9129C204.5,-70.9881 204.5,-61.8428 204.5,-53.2138"/>
<polygon fill="#000000" stroke="#000000" points="208.0001,-53.061 204.5,-43.061 201.0001,-53.061 208.0001,-53.061"/>
</g>
<!-- 10 -->
<g id="node4" class="node">
<title>10</title>
<ellipse fill="#ffffff" stroke="#000000" cx="21.5" cy="-21.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="21.5" y="-17.3" font-family="Times,serif" font-size="14.00" fill="#000000">10</text>
</g>
<!-- 3 -->
<g id="node5" class="node">
<title>3</title>
<ellipse fill="#ffffff" stroke="#000000" cx="82.5" cy="-21.5" rx="21.5" ry="21.5"/>
<text text-anchor="middle" x="82.5" y="-17.3" font-family="Times,serif" font-size="14.00" fill="#000000">3</text>
</g>
<!-- 10&#45;&gt;3 -->
<g id="edge1" class="edge">
<title>10&#45;&gt;3</title>
<path fill="none" stroke="#000000" d="M43.4219,-21.5C45.869,-21.5 48.3162,-21.5 50.7633,-21.5"/>
<polygon fill="#000000" stroke="#000000" points="50.8239,-25.0001 60.8239,-21.5 50.8238,-18.0001 50.8239,-25.0001"/>
</g>
<!-- 3&#45;&gt;1 -->
<g id="edge4" class="edge">
<title>3&#45;&gt;1</title>
<path fill="none" stroke="#000000" d="M104.4219,-21.5C106.869,-21.5 109.3162,-21.5 111.7633,-21.5"/>
<polygon fill="#000000" stroke="#000000" points="111.8239,-25.0001 121.8239,-21.5 111.8238,-18.0001 111.8239,-25.0001"/>
</g>
</g>
</svg>

                    <div style="text-align: center;margin: -8px 0 10px;color: #858585;">長度為 2 的情況</div>
                    </div>
                    
                </div>
<p>最後考慮如何找到基環樹上的環以及鏈長：</p>
<ul>
<li>一種方法是從葉節點開始，不斷向根節點移動，直到遇到環為止，而內向基環樹的葉節點即為入度為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 的節點。因此可以統計每個點的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">in-degree</mtext></mrow><annotation encoding="application/x-tex">\textit{in-degree}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord textit">in-degree</span></span></span></span></span> ，從入度為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 的點開始對圖進行 <mark class="hl-label orange">拓樸排序(topological sort)</mark>，剩餘的點都是基環上的點，</li>
<li>而找以某個點為根節點的鏈長，可以通過對其進行 DFS ，找到以該點為根節點的樹高。但由於我們給定的圖是從葉節點指向根節點，因此需要對圖進行 <mark class="hl-label pink">反向建圖</mark> ，才能從根節點開始進行 DFS 找到樹高。</li>
</ul>
<p>一些注意事項：</p>
<ul>
<li>由於我們要在基環樹上的根節點開始 DFS ，因此建反圖時不能包含環的部分。</li>
<li>為了避免重複處理相同基環上的點，可以標記處理過的基環上的點。</li>
</ul>
<h4 id="複雜度分析">複雜度分析</h4>
<ul>
<li>時間複雜度：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathcal{O}(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>
<ul>
<li>在拓樸排序和反向建圖的過程中，每個點最多被處理一次。</li>
<li>在找基環上的點的過程中，每個點也最多被處理一次。</li>
</ul>
</li>
<li>空間複雜度：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathcal{O}(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></li>
</ul>
<div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">Python</button><button type="button" class="tab">C++</button></div><div class="tab-contents"><div class="tab-item-content active"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maximumInvitations</span>(<span class="params">self, favorite: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        n = <span class="built_in">len</span>(favorite)</span><br><span class="line">        ind = [<span class="number">0</span>] * n</span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> favorite:</span><br><span class="line">            ind[f] += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        rg = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">        q = deque(i <span class="keyword">for</span> i, d <span class="keyword">in</span> <span class="built_in">enumerate</span>(ind) <span class="keyword">if</span> d == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">while</span> q: <span class="comment"># 拓樸排序</span></span><br><span class="line">            u = q.popleft()</span><br><span class="line">            v = favorite[u]</span><br><span class="line">            rg[v].append(u) <span class="comment"># 反向建圖</span></span><br><span class="line">            ind[v] -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> ind[v] == <span class="number">0</span>:</span><br><span class="line">                q.append(v)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 通過 reverse graph，找到最大樹高</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">rdfs</span>(<span class="params">u: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">            res = <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> rg[u]:</span><br><span class="line">                res = <span class="built_in">max</span>(res, rdfs(v) + <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        </span><br><span class="line">        max_ring = sum_chain = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> u, d <span class="keyword">in</span> <span class="built_in">enumerate</span>(ind): <span class="comment"># 遍歷所有基環上的點</span></span><br><span class="line">            <span class="keyword">if</span> d == <span class="number">0</span>: <span class="comment"># 入度為 0 代表非基環上的點或者已經訪問過，跳過</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># 找到基環上的所有點</span></span><br><span class="line">            rings = [u]</span><br><span class="line">            v = favorite[u]</span><br><span class="line">            <span class="keyword">while</span> v != u:</span><br><span class="line">                rings.append(v)</span><br><span class="line">                v = favorite[v]</span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> rings:</span><br><span class="line">                ind[v] = <span class="number">0</span> <span class="comment"># 將基環上的點的入度標記為 0，避免重複訪問</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 若基環長度為 2，則可以選擇基環以及兩側的最長鏈，且其仍然可以展開為鏈，因此可以有多個長度為 2 的基環</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(rings) == <span class="number">2</span>: </span><br><span class="line">                sum_chain += rdfs(u) + rdfs(favorite[u])</span><br><span class="line">            <span class="comment"># 若基環長度大於 2，則只能選擇基環本身</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                max_ring = <span class="built_in">max</span>(max_ring, <span class="built_in">len</span>(rings))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(max_ring, sum_chain)</span><br></pre></td></tr></table></figure></div><div class="tab-item-content"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">int</span> <span class="title">maximumInvitations</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; favorite)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = favorite.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">ind</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> f : favorite) ind[f]++;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">rg</span>(n);</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">      <span class="keyword">if</span> (ind[i] == <span class="number">0</span>) q.<span class="built_in">push</span>(i);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">      <span class="type">int</span> u = q.<span class="built_in">front</span>();</span><br><span class="line">      q.<span class="built_in">pop</span>();</span><br><span class="line">      <span class="type">int</span> v = favorite[u];</span><br><span class="line">      rg[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">      ind[v]--;</span><br><span class="line">      <span class="keyword">if</span> (ind[v] == <span class="number">0</span>) q.<span class="built_in">push</span>(v);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> rdfs = [&amp;](<span class="keyword">auto</span>&amp;&amp; rdfs, <span class="type">int</span> u) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">      <span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> v : rg[u]) </span><br><span class="line">        res = <span class="built_in">max</span>(res, <span class="built_in">rdfs</span>(rdfs, v) + <span class="number">1</span>);</span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> max_ring = <span class="number">0</span>, sum_chain = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> u = <span class="number">0</span>; u &lt; n; ++u) &#123;</span><br><span class="line">      <span class="keyword">if</span> (ind[u] == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">      vector&lt;<span class="type">int</span>&gt; rings = &#123;u&#125;;</span><br><span class="line">      <span class="type">int</span> v = favorite[u];</span><br><span class="line">      <span class="keyword">while</span> (v != u) &#123;</span><br><span class="line">        rings.<span class="built_in">push_back</span>(v);</span><br><span class="line">        v = favorite[v];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> v : rings) ind[v] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (rings.<span class="built_in">size</span>() == <span class="number">2</span>)</span><br><span class="line">        sum_chain += <span class="built_in">rdfs</span>(rdfs, u) + <span class="built_in">rdfs</span>(rdfs, favorite[u]);</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        max_ring = <span class="built_in">max</span>(max_ring, (<span class="type">int</span>)rings.<span class="built_in">size</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(max_ring, sum_chain);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="類題">類題</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://codeforces.com/problemset/problem/2044/G1">CF2044G1 Medium Demon Problem (easy version)</a></li>
<li><a target="_blank" rel="noopener" href="https://vjudge.net/problem/UVA-12442">UVA-12442 Forwarding Emails</a></li>
</ul>
<h2 id="參考資料">參考資料</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/maximum-employees-to-be-invited-to-a-meeting/solutions/1187830/nei-xiang-ji-huan-shu-tuo-bu-pai-xu-fen-c1i1b/">内向基环树：拓扑排序 + 分类讨论（Python/Java/C++/Go/JS/Rust）</a></li>
<li><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/maximum-employees-to-be-invited-to-a-meeting/solutions/2507559/gong-shui-san-xie-sha-shi-nei-xiang-wai-4ig79/">【宫水三叶】啥是内向/外向基环树（拓扑排序）</a></li>
</ul>
<hr>
<h1 id="寫在最後">寫在最後</h1>
<details class="toggle" ><summary class="toggle-button" style="">PROMPT</summary><div class="toggle-content"><div class="note icon-padding flat"><i class="note-icon fa-solid fa-wand-magic-sparkles"></i><p>In a beautiful anime style, a young girl stands in front of a backdrop of densely blooming cherry blossoms. She is wearing a white short-sleeved shirt paired with a light purple skirt and a purple ribbon, exuding a fresh and elegant aura. Her hair is a deep brown short cut, with bangs parted to reveal a delicate face. Her left hand is raised gently while her right hand holds a bouquet of pink flowers, posing naturally. The background is slightly blurred but filled with an abundance of cherry blossoms, enhancing the romantic and serene atmosphere. The contrast is intensified, making the colors more vibrant and the overall scene more striking, capturing a poetic and picturesque moment.</p>
</div></div></details>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://gdst.dev">SayA</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章連結: </span><span class="post-copyright-info"><a href="https://gdst.dev/posts/LC-2127/">https://gdst.dev/posts/LC-2127/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版權聲明: </span><span class="post-copyright-info">本部落格所有文章除特別聲明外，均採用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 授權協議。轉載請註明來源 <a href="https://gdst.dev" target="_blank">十六個天亮</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/DFS/">DFS</a><a class="post-meta__tags" href="/tags/LeetCode/">LeetCode</a><a class="post-meta__tags" href="/tags/%E5%9C%96%E8%AB%96-Graph/">圖論(Graph)</a><a class="post-meta__tags" href="/tags/%E6%8B%93%E6%A8%B8%E6%8E%92%E5%BA%8F-Topological-Sort/">拓樸排序(Topological Sort)</a><a class="post-meta__tags" href="/tags/%E5%9F%BA%E7%92%B0%E6%A8%B9-Pseudotree/">基環樹(Pseudotree)</a></div><div class="post-share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook"></a><a class="a2a_button_facebook_messenger"></a><a class="a2a_button_line"></a><a class="a2a_button_telegram"></a><a class="a2a_button_x"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a></div></div><script async="async" src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相關推薦</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/LC-B154/" title="LeetCode Biweekly Contest 154 解題紀錄"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.gdst.dev/works/849816596120626766.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-07-18</div><div class="info-item-2">LeetCode Biweekly Contest 154 解題紀錄</div></div><div class="info-2"><div class="info-item-1">Problem solving record for LeetCode Biweekly Contest 154. Rank 169.</div></div></div></a><a class="pagination-related" href="/posts/LC-685/" title="LeetCode 🔴 685. Redundant Connection II"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.gdst.dev/remix/788298843251956930.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-07-18</div><div class="info-item-2">LeetCode 🔴 685. Redundant Connection II</div></div><div class="info-2"><div class="info-item-1">Problem solving record for LeetCode 685. Redundant Connection II.</div></div></div></a><a class="pagination-related" href="/posts/LC-684/" title="LeetCode 🟡 684. Redundant Connection"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.gdst.dev/works/788797677933578476.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-07-18</div><div class="info-item-2">LeetCode 🟡 684. Redundant Connection</div></div><div class="info-2"><div class="info-item-1">Problem solving record for LeetCode 684. Redundant Connection.</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 評論</span></div><div class="comment-switch"><span class="first-comment">Waline</span><span id="switch-btn"></span><span class="second-comment">Giscus</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/imgs/profile/profile3.png" onerror="this.onerror=null;this.src='/imgs/404_friend.gif'" alt="avatar"/></div><div class="author-info-name">SayA</div><div class="author-info-description">你說的對，但是我孤單刷題。</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">262</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">147</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">48</div></a></div><a id="card-info-btn" href="/atom.xml"><i class="fas fa-rss"></i><span>Subscribe</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/cxyfer" target="_blank" title="Github"><i class="fab fa-github" style="color: `#404040`;"></i></a><a class="social-icon" href="https://leetcode.com/gdstw/" target="_blank" title="LeetCode"><i class="icon--simple-icons icon--simple-icons--leetcode" style="color: `#404040`;"></i></a><a class="social-icon" href="https://t.me/usayame" target="_blank" title="Telegram"><i class="icon--simple-icons icon--simple-icons--telegram" style="color: `#404040`;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">🌐主站：<a href="https://gdst.dev/">gdst.dev</a> (hosted by <i class="fa-brands fa-github"></i> )<br>🪐鏡像：<a target="_blank" rel="noopener" href="https://saya.ing/">saya.ing</a> (hosted by <i class="fa-brands fa-cloudflare"></i> )<br>平凡人的刷題日常。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目錄</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%94%97-%F0%9F%94%B4-2127-Maximum-Employees-to-Be-Invited-to-a-Meeting-swig%EF%BF%BC2"><span class="toc-text">🔗 🔴 2127. Maximum Employees to Be Invited to a Meeting 2449</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%8C%E6%84%8F"><span class="toc-text">題意</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF%EF%BC%9A%E5%9F%BA%E7%92%B0%E6%A8%B9-pseudotree-%E8%88%87%E5%9F%BA%E7%92%B0%E6%A8%B9%E6%A3%AE%E6%9E%97-pseudoforest"><span class="toc-text">思路：基環樹(pseudotree)與基環樹森林(pseudoforest)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%9E%E9%A1%8C"><span class="toc-text">類題</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99"><span class="toc-text">參考資料</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%AB%E5%9C%A8%E6%9C%80%E5%BE%8C"><span class="toc-text">寫在最後</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/CF2109C/" title="Codeforces 🔵 CF2074C. Hacking Numbers (Easy/Medium/Hard Version)"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.gdst.dev/works/885055825679262662.webp" onerror="this.onerror=null;this.src='/imgs/404_img.jpg'" alt="Codeforces 🔵 CF2074C. Hacking Numbers (Easy/Medium/Hard Version)"/></a><div class="content"><a class="title" href="/posts/CF2109C/" title="Codeforces 🔵 CF2074C. Hacking Numbers (Easy/Medium/Hard Version)">Codeforces 🔵 CF2074C. Hacking Numbers (Easy/Medium/Hard Version)</a><time datetime="2025-07-17T07:38:30.000Z" title="發表於 2025-07-17 15:38:30">2025-07-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/LC-3202/" title="LeetCode 🟡 3202. Find the Maximum Length of Valid Subsequence II"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.gdst.dev/works/866258196665239093.webp" onerror="this.onerror=null;this.src='/imgs/404_img.jpg'" alt="LeetCode 🟡 3202. Find the Maximum Length of Valid Subsequence II"/></a><div class="content"><a class="title" href="/posts/LC-3202/" title="LeetCode 🟡 3202. Find the Maximum Length of Valid Subsequence II">LeetCode 🟡 3202. Find the Maximum Length of Valid Subsequence II</a><time datetime="2025-07-17T04:24:54.000Z" title="發表於 2025-07-17 12:24:54">2025-07-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/LC-B154/" title="LeetCode Biweekly Contest 154 解題紀錄"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.gdst.dev/works/849816596120626766.webp" onerror="this.onerror=null;this.src='/imgs/404_img.jpg'" alt="LeetCode Biweekly Contest 154 解題紀錄"/></a><div class="content"><a class="title" href="/posts/LC-B154/" title="LeetCode Biweekly Contest 154 解題紀錄">LeetCode Biweekly Contest 154 解題紀錄</a><time datetime="2025-04-14T15:36:49.000Z" title="發表於 2025-04-14 23:36:49">2025-04-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Luogu-P2627/" title="Luogu 🟢 P2627 [USACO11OPEN] Mowing the Lawn G"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.gdst.dev/works/846172612737479668.webp" onerror="this.onerror=null;this.src='/imgs/404_img.jpg'" alt="Luogu 🟢 P2627 [USACO11OPEN] Mowing the Lawn G"/></a><div class="content"><a class="title" href="/posts/Luogu-P2627/" title="Luogu 🟢 P2627 [USACO11OPEN] Mowing the Lawn G">Luogu 🟢 P2627 [USACO11OPEN] Mowing the Lawn G</a><time datetime="2025-04-09T19:11:28.000Z" title="發表於 2025-04-10 03:11:28">2025-04-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/CF1791F/" title="Codeforces 🟡 CF1791F. Range Update Point Query"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.gdst.dev/works/846172720111665078.webp" onerror="this.onerror=null;this.src='/imgs/404_img.jpg'" alt="Codeforces 🟡 CF1791F. Range Update Point Query"/></a><div class="content"><a class="title" href="/posts/CF1791F/" title="Codeforces 🟡 CF1791F. Range Update Point Query">Codeforces 🟡 CF1791F. Range Update Point Query</a><time datetime="2025-04-08T08:48:27.000Z" title="發表於 2025-04-08 16:48:27">2025-04-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/CF2074C/" title="Codeforces 🟡 CF2074C. XOR and Triangle"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.gdst.dev/works/846172720111665079.webp" onerror="this.onerror=null;this.src='/imgs/404_img.jpg'" alt="Codeforces 🟡 CF2074C. XOR and Triangle"/></a><div class="content"><a class="title" href="/posts/CF2074C/" title="Codeforces 🟡 CF2074C. XOR and Triangle">Codeforces 🟡 CF2074C. XOR and Triangle</a><time datetime="2025-04-07T15:33:44.000Z" title="發表於 2025-04-07 23:33:44">2025-04-07</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By SayA</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主題 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="閱讀模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="繁簡轉換">簡</button><button id="darkmode" type="button" title="日夜模式切換"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="單欄和雙欄切換"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="設定"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往評論"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到頂端"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(async () => {
  const showKatex = () => {
    document.querySelectorAll('#article-container .katex').forEach(el => el.classList.add('katex-show'))
  }

  if (!window.katex_js_css) {
    window.katex_js_css = true
    await btf.getCSS('https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css')
    if (false) {
      await btf.getScript('https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js')
    }
  }

  showKatex()
})()</script><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = {"turnstileKey":"0x4AAAAAAAcD5ByjmzcNyCDK","meta":["nick","mail"],"requiredMeta":["nick"],"lang":"zh-TW","search":false,"login":"enable","locale":{"nick":"暱稱","mail":"信箱","link":"個人網站","admin":"Admin","placeholder":"本站已啟用評論通知，若希望收到回覆通知，請務必留下信箱。本站不需註冊即可評論，但若欲使用個人頭像，請使用在 Gravatar 註冊的信箱，或是註冊本站之評論系統後自行設定。"}}

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: 'https://wl.gdst.dev/',
      pageview: true,
      dark: 'html[data-theme="dark"]',
      comment: false,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css')
        .then(() => import('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Waline' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Waline' === 'Waline' || !false) {
    if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'cxyfer/hexo-giscus',
      'data-repo-id': 'R_kgDOL7DtCA',
      'data-category-id': 'DIC_kwDOL7DtCM4CfVdo',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Waline' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Waline' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜尋</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  資料載入中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜尋文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>